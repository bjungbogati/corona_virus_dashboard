addCircleMarkers(
lng= ~long, lat= ~lat,
radius = ifelse(latest_covid19$confirmed > 20, sqrt(latest_covid19$confirmed)/2, 5),
stroke = FALSE, fillOpacity = 0.5,
label = mytext,
color = "red",
labelOptions = labelOptions(style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "13px",
direction = "auto",
background = "#222")
)
map_corona
map_corona <- leaflet(latest_covid19,
options = leafletOptions(attributionControl=F)) %>%
addProviderTiles(providers$CartoDB.DarkMatter) %>%
addCircleMarkers(
lng= ~long, lat= ~lat,
radius = ifelse(latest_covid19$confirmed > 20, sqrt(latest_covid19$confirmed)/2, 5),
stroke = FALSE, fillOpacity = 0.5,
label = mytext,
color = "red",
labelOptions = labelOptions(style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "13px",
direction = "auto",
background = "#222")
)
map_corona
mean(latest_covid19$long)
map_corona <- leaflet(latest_covid19,
options = leafletOptions(attributionControl=F)) %>%
setView(lng = mean(latest_covid19$long), lat = mean(latest_covid19$lat), zoom = 10) %>%
addProviderTiles(providers$CartoDB.DarkMatter) %>%
addCircleMarkers(
lng= ~long, lat= ~lat,
radius = ifelse(latest_covid19$confirmed > 20, sqrt(latest_covid19$confirmed)/2, 5),
stroke = FALSE, fillOpacity = 0.5,
label = mytext,
color = "red",
labelOptions = labelOptions(style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "13px",
direction = "auto",
background = "#222")
)
map_corona
map_corona <- leaflet(latest_covid19,
options = leafletOptions(attributionControl=F)) %>%
setView(lng = mean(latest_covid19$long), lat = mean(latest_covid19$lat), zoom = 2) %>%
addProviderTiles(providers$CartoDB.DarkMatter) %>%
addCircleMarkers(
lng= ~long, lat= ~lat,
radius = ifelse(latest_covid19$confirmed > 20, sqrt(latest_covid19$confirmed)/2, 5),
stroke = FALSE, fillOpacity = 0.5,
label = mytext,
color = "red",
labelOptions = labelOptions(style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "13px",
direction = "auto",
background = "#222")
)
map_corona
map_corona <- leaflet(latest_covid19,
options = leafletOptions(attributionControl=F)) %>%
setView(lng = mean(latest_covid19$long), lat = mean(latest_covid19$lat), zoom = .2) %>%
addProviderTiles(providers$CartoDB.DarkMatter) %>%
addCircleMarkers(
lng= ~long, lat= ~lat,
radius = ifelse(latest_covid19$confirmed > 20, sqrt(latest_covid19$confirmed)/2, 5),
stroke = FALSE, fillOpacity = 0.5,
label = mytext,
color = "red",
labelOptions = labelOptions(style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "13px",
direction = "auto",
background = "#222")
)
map_corona
map_corona <- leaflet(latest_covid19,
options = leafletOptions(attributionControl=F)) %>%
setView(lng = mean(latest_covid19$long), lat = mean(latest_covid19$lat), zoom = .9) %>%
addProviderTiles(providers$CartoDB.DarkMatter) %>%
addCircleMarkers(
lng= ~long, lat= ~lat,
radius = ifelse(latest_covid19$confirmed > 20, sqrt(latest_covid19$confirmed)/2, 5),
stroke = FALSE, fillOpacity = 0.5,
label = mytext,
color = "red",
labelOptions = labelOptions(style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "13px",
direction = "auto",
background = "#222")
)
map_corona
map_corona <- leaflet(latest_covid19,
options = leafletOptions(attributionControl=F)) %>%
setView(lng = mean(latest_covid19$long), lat = mean(latest_covid19$lat), zoom = 1) %>%
addProviderTiles(providers$CartoDB.DarkMatter) %>%
addCircleMarkers(
lng= ~long, lat= ~lat,
radius = ifelse(latest_covid19$confirmed > 20, sqrt(latest_covid19$confirmed)/2, 5),
stroke = FALSE, fillOpacity = 0.5,
label = mytext,
color = "red",
labelOptions = labelOptions(style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "13px",
direction = "auto",
background = "#222")
)
map_corona
map_corona <- leaflet(latest_covid19,
options = leafletOptions(attributionControl=F)) %>%
setView(lng = mean(latest_covid19$long), lat = mean(latest_covid19$lat), zoom = 1.5) %>%
addProviderTiles(providers$CartoDB.DarkMatter) %>%
addCircleMarkers(
lng= ~long, lat= ~lat,
radius = ifelse(latest_covid19$confirmed > 20, sqrt(latest_covid19$confirmed)/2, 5),
stroke = FALSE, fillOpacity = 0.5,
label = mytext,
color = "red",
labelOptions = labelOptions(style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "13px",
direction = "auto",
background = "#222")
)
map_corona
graph_df(top_countries, "bar")
map_corona <- leaflet(latest_covid19,
options = leafletOptions(attributionControl=F)) %>%
setView(lng = mean(latest_covid19$long), lat = mean(latest_covid19$lat), zoom = 1.5) %>%
addProviderTiles(providers$CartoDB.DarkMatter) %>%
addCircleMarkers(
lng= ~long, lat= ~lat,
radius = ifelse(latest_covid19$confirmed > 20, sqrt(latest_covid19$confirmed)/2, 5),
stroke = FALSE, fillOpacity = 0.5,
label = mytext,
color = "red",
labelOptions = labelOptions(style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "13px",
direction = "auto",
background = "#222")
)
map_corona
map_corona <- leaflet(latest_covid19,
options = leafletOptions(attributionControl=F)) %>%
setView(lng = 49.3256316, lat = -0.0026366, zoom = 1.5) %>%
addProviderTiles(providers$CartoDB.DarkMatter) %>%
addCircleMarkers(
lng= ~long, lat= ~lat,
radius = ifelse(latest_covid19$confirmed > 20, sqrt(latest_covid19$confirmed)/2, 5),
stroke = FALSE, fillOpacity = 0.5,
label = mytext,
color = "red",
labelOptions = labelOptions(style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "13px",
direction = "auto",
background = "#222")
)
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
source("R/utils.R")
View(latest_covid19)
View(m)
country_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$country_region) %>%
hc_add_series(name = "Confirmed", data = data$Confirmed) %>%
hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "China vs Top 10 Countries") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#b9815b","#62a758", "#b53f40"))
}
country_df(m, "line")
country_df(m[1:11, ], "line")
country_df(m[1:11, ], "bar")
country_df(m[1:6, ], "bar")
country_df(m[1:6, ], "line")
country_df(m[1:6, ], "column")
country_df(m[1:2, ], "column")
country_df(m[1:2, ], "line")
View(n)
View(latest_covid19)
View(covid19_cases_date)
View(latest_covid19)
View(covid19_outbreak)
country_df(m[1:2, ], "line")
country_df(m[1:5, ], "line")
covid19_outbreak
covid19_outbreak %>%
country_df(m[1:5, ], "line")
covid19_outbreak %>%
group_by(country_region, date) %>%
summarise( Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
country_date <- covid19_outbreak %>%
group_by(country_region, date) %>%
summarise( Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
View(country_date)
country_df(country_date[1:5, ], "line")
country_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$date) %>%
hc_add_series(name = "Confirmed", data = data$Confirmed) %>%
hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "China vs Top 10 Countries") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#b9815b","#62a758", "#b53f40"))
}
country_date <- covid19_outbreak %>%
group_by(country_region, date) %>%
summarise( Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
country_df(country_date[, ], "line")
country_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$date) %>%
hc_add_series(name = "Confirmed", data = data$country_region) %>%
hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "China vs Top 10 Countries") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#b9815b","#62a758", "#b53f40"))
}
country_date <- covid19_outbreak %>%
group_by(country_region, date) %>%
summarise( Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
country_df(country_date[, ], "line")
country_df(m[, ], "line")
country_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$date) %>%
hc_add_series(name = "Confirmed", data = data$Confirmed) %>%
hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "China vs Top 10 Countries") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#b9815b","#62a758", "#b53f40"))
}
country_date <- covid19_outbreak %>%
group_by(country_region, date) %>%
summarise( Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
country_df(m[, ], "line")
country_df(m[1:4, ], "line")
country_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$country_region) %>%
hc_add_series(name = "Confirmed", data = data$Confirmed) %>%
hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "China vs Top 10 Countries") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#b9815b","#62a758", "#b53f40"))
}
country_date <- covid19_outbreak %>%
group_by(country_region, date) %>%
summarise( Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
country_df(m[1:4, ], "line")
country_df(m[1:4, ], "column")
country_df(m[1:4, ], "scatter")
country_df(m[1:4, ], "treemap")
country_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$country_region) %>%
# hc_add_series(name = "Confirmed", data = data$Confirmed) %>%
# hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "China vs Top 10 Countries") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#b9815b","#62a758", "#b53f40"))
}
country_df(m[1:4, ], "treemap")
country_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$country_region) %>%
# hc_add_series(name = "Confirmed", data = data$Confirmed) %>%
# hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "China vs Top 10 Countries") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#62a758"))
}
country_df(m[1:4, ], "treemap")
library(viridisLite)
library(treemap)
country_df(m[1:4, ], "bubble")
country_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$country_region) %>%
hc_add_series(name = "Confirmed", data = data$Confirmed) %>%
hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "China vs Top 10 Countries") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#b9815b","#62a758", "#b53f40"))
}
country_df(m[1:4, ], "bubble")
View(m)
country_df(m[1:4, ], "bubble")
country_df(m[1:4, ], "line")
country_df(m[1:4, ], "line")
country_df(m[1:4, ], "pie")
country_df(m[1:4, 2], "pie")
country_df(m[1:4, 2], "scatter")
country_df(m[1:4, ], "scatter")
m
library(scales)
pacman::p_load("flexdashboard", "tidyr", "scales", "readr", "dplyr", "highcharter", "janitor", "kableExtra", "knitr", "leaflet")
source("R/extract_data.R")
# latest_outbreak <- readr::read_csv("latest_covid19.csv")
# covid19_outbreak <- readr::read_csv("covid19_outbreak.csv")
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered)) %>%
arrange(-Confirmed)
pacman::p_load("flexdashboard", "tidyr", "scales", "readr", "dplyr", "highcharter", "janitor", "kableExtra", "knitr", "leaflet")
source("R/extract_data.R")
# latest_outbreak <- readr::read_csv("latest_covid19.csv")
# covid19_outbreak <- readr::read_csv("covid19_outbreak.csv")
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered)) %>%
arrange(-Confirmed)
pacman::p_load("flexdashboard", "tidyr", "scales", "readr", "dplyr", "highcharter", "janitor", "kableExtra", "knitr", "leaflet")
source("R/extract_data.R")
# latest_outbreak <- readr::read_csv("latest_covid19.csv")
# covid19_outbreak <- readr::read_csv("covid19_outbreak.csv")
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered)) %>%
arrange(-Confirmed)
Recovered = comma(sum(recovered))
m <- latest_covid19 %>%
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered))
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered)))
pacman::p_load("flexdashboard", "tidyr", "scales", "readr", "dplyr", "highcharter", "janitor", "kableExtra", "knitr", "leaflet")
source("R/extract_data.R")
# latest_outbreak <- readr::read_csv("latest_covid19.csv")
# covid19_outbreak <- readr::read_csv("covid19_outbreak.csv")
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered)))
View(m)
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered)) %>%
arrange(-Confirmed)
View(m)
View(m)
View(m)
arrange(-Confirmed)
m <- latest_covid19 %>%
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered)) %>%
arrange(-Confirmed)
m <- latest_covid19 %>%
group_by(country_region)
m <- latest_covid19 %>%
group_by(country_region)
View(m)
Recovered = comma(sum(recovered))
m <- latest_covid19 %>%
group_by(country_region) %>%
arrange(-confirmed) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered))
m <- latest_covid19 %>%
group_by(country_region) %>%
arrange(-confirmed) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered)))
m <- latest_covid19 %>%
group_by(country_region) %>%
arrange(-confirmed) %>%
summarise( Confirmed = comma(sum(confirmed)),
Deaths = comma(sum(deaths)),
Recovered = comma(sum(recovered)))
View(m)
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
View(m)
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed) %>%
mutate(Confirmed = comma(Confirmed),
Deaths = comma(Deaths),
Recovered = comma(Recovered))
View(m)
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise( Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
m1 <- m %>% mutate(Confirmed = comma(Confirmed),
Deaths = comma(Deaths),
Recovered = comma(Recovered))
View(m1)
View(m)
View(m1)
?flexdashboard
raw_covid19_confirmed <- readr::read_csv("https://bit.ly/covid19_confirmed")
raw_covid19_deaths <- readr::read_csv("http://bit.ly/covid19_deaths")
raw_covid19_recovered <- readr::read_csv("http://bit.ly/covid19-recovered")
covid19_cases <- function(data, value_name) {
data %>%
tidyr::pivot_longer(
cols = 5:ncol(data),
names_to = "date",
values_to = value_name
) %>%
dplyr::mutate(
date = lubridate::mdy(date)
) %>%
janitor::clean_names()
}
a <- covid19_cases(raw_covid19_confirmed, "confirmed")
b <- covid19_cases(raw_covid19_deaths, "deaths")
c <- covid19_cases(raw_covid19_recovered, "recovered")
pacman::p_load("flexdashboard", "tidyr", "scales", "readr", "dplyr", "highcharter", "janitor", "kableExtra", "knitr", "leaflet")
covid19_cases <- function(data, value_name) {
data %>%
tidyr::pivot_longer(
cols = 5:ncol(data),
names_to = "date",
values_to = value_name
) %>%
dplyr::mutate(
date = lubridate::mdy(date)
) %>%
janitor::clean_names()
}
a <- covid19_cases(raw_covid19_confirmed, "confirmed")
b <- covid19_cases(raw_covid19_deaths, "deaths")
c <- covid19_cases(raw_covid19_recovered, "recovered")
View(a)
View(b)
View(c)
covid19_outbreak <- a %>%
merge(b) %>%
merge(c)
View(covid19_outbreak)
