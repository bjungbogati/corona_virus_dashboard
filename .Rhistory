Recovered = sum(recovered)) %>%
arrange(-Confirmed)
m1 <- m %>% mutate(Confirmed = comma(Confirmed),
Deaths = comma(Deaths),
Recovered = comma(Recovered))
View(m1)
View(m)
View(m1)
?flexdashboard
raw_covid19_confirmed <- readr::read_csv("https://bit.ly/covid19_confirmed")
raw_covid19_deaths <- readr::read_csv("http://bit.ly/covid19_deaths")
raw_covid19_recovered <- readr::read_csv("http://bit.ly/covid19-recovered")
covid19_cases <- function(data, value_name) {
data %>%
tidyr::pivot_longer(
cols = 5:ncol(data),
names_to = "date",
values_to = value_name
) %>%
dplyr::mutate(
date = lubridate::mdy(date)
) %>%
janitor::clean_names()
}
a <- covid19_cases(raw_covid19_confirmed, "confirmed")
b <- covid19_cases(raw_covid19_deaths, "deaths")
c <- covid19_cases(raw_covid19_recovered, "recovered")
pacman::p_load("flexdashboard", "tidyr", "scales", "readr", "dplyr", "highcharter", "janitor", "kableExtra", "knitr", "leaflet")
covid19_cases <- function(data, value_name) {
data %>%
tidyr::pivot_longer(
cols = 5:ncol(data),
names_to = "date",
values_to = value_name
) %>%
dplyr::mutate(
date = lubridate::mdy(date)
) %>%
janitor::clean_names()
}
a <- covid19_cases(raw_covid19_confirmed, "confirmed")
b <- covid19_cases(raw_covid19_deaths, "deaths")
c <- covid19_cases(raw_covid19_recovered, "recovered")
View(a)
View(b)
View(c)
covid19_outbreak <- a %>%
merge(b) %>%
merge(c)
View(covid19_outbreak)
pacman::p_load("flexdashboard", "tidyr", "scales", "readr", "dplyr", "highcharter", "janitor", "kableExtra", "knitr", "leaflet")
source("R/extract_data.R")
# latest_outbreak <- readr::read_csv("latest_covid19.csv")
# covid19_outbreak <- readr::read_csv("covid19_outbreak.csv")
m <- latest_covid19 %>%
group_by(country_region, date) %>%
summarise( Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
date_country <- covid19_outbreak %>%
select(-c(confirmed, recovered)) %>%
filter()
group_by(date, country_region) %>%
summarise(deaths = sum(deaths))
View(date_country)
date_country <- covid19_outbreak %>%
group_by(date, country_region) %>%
summarise(deaths = sum(deaths)) %>%
top_n(10, country_region)
date_country <- covid19_outbreak %>%
group_by(date, country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, country_region)
top_country_date <- covid19_outbreak %>%
group_by(date, country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, country_region)
View(top_country_date)
top_country_date <- covid19_outbreak %>%
group_by(date, country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, Deaths)
View(top_country_date)
top_country_date <- covid19_outbreak %>%
group_by(country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, Deaths)
View(top_country_date)
top_country_date <- covid19_outbreak %>%
group_by(date, country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, Deaths)
View(top_country_date)
top_country_date <- covid19_outbreak %>%
group_by(date, country_region) %>%
summarise(Deaths = sum(deaths)) %>%
top_n(10, Deaths)
View(top_country_date)
top_country_date <- covid19_outbreak %>%
group_by(date, country_region) %>%
summarise(deaths = sum(deaths)) %>%
top_n(10, deaths)
View(top_country_date)
top_country_date <- covid19_outbreak %>%
filter(deaths > 10) %>%
group_by(date, country_region) %>%
summarise(deaths = sum(deaths)) %>%
top_n(10, deaths)
View(top_country_date)
top_country_date <- covid19_outbreak %>%
filter(deaths > 10) %>%
group_by(country_region) %>%
summarise(deaths = sum(deaths)) %>%
top_n(10, deaths)
View(raw_covid19_deaths)
View(covid19_outbreak)
top_country_date <- covid19_outbreak %>%
filter(deaths > 10) %>%
group_by(date, country_region) %>%
summarise(deaths = sum(deaths)) %>%
top_n(10, deaths)
top_country_date <- covid19_outbreak %>%
filter(deaths > 10) %>%
group_by(date, country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, deaths)
View(covid19_outbreak)
top_country_date <- covid19_outbreak %>%
filter(deaths > 10) %>%
group_by(date, country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, Deaths) %>%
arrange(-Deaths)
View(top_country_date)
top_country_death_date <- covid19_outbreak %>%
filter(deaths > 10) %>%
group_by(date, country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, Deaths) %>%
arrange(-Deaths)
top_country_date
View(top_country_date)
top_country_date %>% highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_country_date$Deaths) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#da3f11","#6da700", "#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
top_country_date %>% highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_country_date$Deaths) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#da3f11","#6da700", "#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
top_country_date %>% highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_country_date$Deaths) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_country_date$Deaths) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_country_date$country_region) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
top_country_date %>%
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", hcaes(y = top_country_date$Deaths, color = country_region)) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
top_country_date %>%
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", hcaes(y = top_country_date$Deaths, color = top_country_date$country_region)) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", hcaes(y = top_country_date$Deaths, color = top_country_date$country_region)) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", hcaes(y = top_country_date$Deaths)) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", hcaes(y = top_country_date$country_region)) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series_ts(name = "Deaths", hcaes(y = top_country_date$deaths)) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
top_country_date
top_country_date_tidy <- top_country_date %>%
tidyr::pivot_longer(
cols = 3:5,
names_to = "type",
values_to = "cases"
)
View(top_country_date_tidy)
top_country_date <- top_country_date %>%
tidyr::pivot_longer(
cols = 3:5,
names_to = "type",
values_to = "cases"
)
top_deaths <- top_country_date %>%
tidyr::pivot_longer(
cols = 3:5,
names_to = "type",
values_to = "cases"
) %>%
filter(cases == "Deaths")
top_deaths <- top_country_date %>%
tidyr::pivot_longer(
cols = 3:5,
names_to = "type",
values_to = "cases"
) %>%
filter(type == "Deaths")
top_deaths <- top_country_date %>%
tidyr::pivot_longer(
cols = 3:5,
names_to = "type",
values_to = "cases"
) %>%
filter(type == "Deaths")
top_country_date <- covid19_outbreak %>%
filter(deaths > 10) %>%
group_by(date, country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, Deaths) %>%
arrange(-Deaths)
top_deaths <- top_country_date %>%
tidyr::pivot_longer(
cols = 3:5,
names_to = "type",
values_to = "cases"
) %>%
filter(type == "Deaths")
View(top_deaths)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", hcaes(y = top_country_date$type)) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_country_date$type)) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_country_date$type) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_country_date$country_region) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hchart(top_deaths, type = 'line', hcaes(y = Deaths, group = country_region, x = date)) %>%
hc_xAxis(type = "datetime")
hchart(top_deaths, type = 'line', hcaes(y = Deaths, group = country_region, x = date)) %>%
hc_xAxis(type = "datetime")
hchart(top_deaths, type = 'line', hcaes(y = ~Deaths, group = ~country_region, x = ~date)) %>%
hc_xAxis(type = "datetime")
hchart(type = 'line', hcaes(y = top_deaths$Deaths, group = top_deaths$country_region,
x = top_deaths$date)) %>%
hc_xAxis(type = "datetime")
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_deaths$country_region) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_deaths) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
m <- latest_covid19 %>%
group_by(country_region, date) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
top_country_date <- covid19_outbreak %>%
filter(deaths > 10) %>%
group_by(date, country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, Deaths) %>%
arrange(-Deaths)
top_deaths <- top_country_date %>%
tidyr::pivot_longer(
cols = 3:5,
names_to = "type",
values_to = "cases"
) %>%
filter(type == "Deaths")
highchart() %>%
hc_chart(type = "line") %>%
hc_xAxis(categories = top_country_date$date) %>%
hc_add_series(name = "Deaths", data = top_deaths) %>%
hc_title(text = "Covid19 Cases by Date") %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_colors(c("#bdbdbd")) %>%
hc_tooltip(table = TRUE, sort = TRUE)
m1 <- m %>% mutate(Confirmed = comma(Confirmed),
Deaths = comma(Deaths),
Recovered = comma(Recovered))
n <- covid19_outbreak %>%
group_by(date) %>%
summarise(confirmed = sum(confirmed),
deaths = sum(deaths),
recovered = sum(recovered)) %>%
arrange(confirmed)
only_deaths <- latest_covid19 %>%
filter(deaths != 0)
only_recov <- latest_covid19 %>%
filter(recovered != 0)
graph_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$country_region) %>%
hc_add_series(name = "Confirmed", data = data$Confirmed) %>%
hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "Countries by Cases (Excl. China)") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#da3f11","#6da700", "#bdbdbd"))
}
graph_df(n, "line")
graph_df(n, "bar")
graph_df(m, "bar")
m <- latest_covid19 %>%
group_by(country_region, date) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
m <- latest_covid19 %>%
group_by(country_region, date) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
source("R/extract_data.R")
View(latest_covid19)
graph_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$country_region) %>%
hc_add_series(name = "Confirmed", data = data$Confirmed) %>%
hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "Countries by Cases (Excl. China)") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#da3f11","#6da700", "#bdbdbd"))
}
graph_df(m, "bar")
m <- latest_covid19 %>%
group_by(country_region, date) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
View(n)
m <- latest_covid19 %>%
group_by(country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
arrange(-Confirmed)
View(latest_covid19)
graph_df <- function(data, graph_type) {
highchart() %>%
hc_chart(type = graph_type) %>%
hc_xAxis(categories = data$country_region) %>%
hc_add_series(name = "Confirmed", data = data$Confirmed) %>%
hc_add_series(name = "Recovered", data = data$Recovered) %>%
hc_add_series(name = "Deaths", data = data$Deaths) %>%
hc_title(text = paste("Top", nrow(data), "Countries by Cases (Excl. China)") ) %>%
hc_add_theme(hc_theme_darkunica()) %>%
hc_tooltip(table = TRUE, sort = TRUE) %>%
hc_colors(c("#da3f11","#6da700", "#bdbdbd"))
}
graph_df(m, "line")
top_countries <- head(m, 11)[-1, ]
graph_df(top_countries, "line")
top_countries <- head(m, 11)
graph_df(top_countries, "line")
hchart(top_country_date, "line", hcaes(x = date, y = Deaths, color = country_region))
hchart(top_country_date, "line", hcaes(x = date, y = Deaths, group_by = country_region))
hchart(top_country_date, "line", hcaes(x = date, y = Deaths, group = country_region))
highchart() %>%
hc_chart(type = "line") %>%
hc_add_series_df_tidy(data = top_deaths, group = country_region, values = cases)
highchart() %>%
hc_chart(type = "line") %>%
hc_add_series(data = top_deaths, group = country_region, values = cases)
highchart() %>%
hc_chart(type = "line") %>%
hc_add_series(data = top_deaths, group = top_deaths$country_region,
values = top_deaths$cases)
hchart(top_country_date, "line", hcaes(x = date, y = Deaths, group = country_region))
highchart() %>%
hc_chart(type = "line") %>%
hc_add_series(data = top_deaths, group = top_deaths$country_region,
values = top_deaths$cases)
days <- yday(top_country_date$date) # so Jan 1 = day 0
library(lubridate)
days <- yday(top_country_date$date) # so Jan 1 = day 0
total_days <- cumsum(days)
top_country_date$date
arrange(top_country_date$date)
arrange(desc(top_country_date$date))
top_country_date %>% arrange(desc(date))
top_country_date %>% arrange(-desc(date))
top_country_date %>% arrange(date)
top_country_date %>% arrange(date) - 22
top_country_date <- covid19_outbreak %>%
filter(deaths > 10) %>%
group_by(date, country_region) %>%
summarise(Confirmed = sum(confirmed),
Deaths = sum(deaths),
Recovered = sum(recovered)) %>%
top_n(10, Deaths) %>%
arrange(date)
days <- yday(top_country_date$date) - 21 # so Jan 1 = day 0
total_days <- cumsum(days)
